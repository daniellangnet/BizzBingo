@using BizzBingo.Web.Models
@model Word
@{
    ViewBag.Title = Model.Title;
}
<div class="row">
    <div class="span17">
        <h1>
            @Model.Title</h1>
    </div>
</div>
<div class="row">
    <div class="span11">
        <p>
            @Model.Description</p>
        <div class="well" style="padding: 14px 19px;">
            <input id="upvote" class="btn success" type="button" value="Like!" />
            <input id="downvote" class="btn danger" type="button" value="Don´t like!" />
        </div>
    </div>
    <div class="span5">
        <table class="zebra-striped">
            <thead>
                <tr>
                    <th colspan="2" style="width: 190px;">
                        <h3>
                            Stats</h3>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        Shared on
                    </td>
                    <td>
                        @Model.CreatedOn.ToShortDateString()
                    </td>
                </tr>
                <tr>
                    <td>
                        Views
                    </td>
                    <td id="stateViews">
                        @Model.Views
                    </td>
                </tr>
                <tr>
                    <td>
                        Likes
                    </td>
                    <td id="stateUpvotes">
                        @Model.UpVotes
                    </td>
                </tr>
                <tr>
                    <td>
                        Don´t likes
                    </td>
                    <td id="stateDownvotes">
                        @Model.DownVotes
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="span11">
        <ul class="tabs">
            <li><a href="#all">All resources</a></li>
            <li class="active"><a href="#popular">Popularity</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="all">
                @for (int i = 0; i < 10; i++)
                {
                    <div class="row">
                        <div class="span3">
                            <img class="thumbnail" src="http://placehold.it/150x113" alt="">
                            
                        </div>
                        <div class="span8">
                            <h4>
                                Websiteblablub <small>Blogpost</small>&nbsp;<span class="label">+500</span></h4>
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam libero massa, elementum
                                sed gravida ac, facilisis ac massa. Pellentesque consequat urna leo, at posuere
                                magna. Integer lacinia nisi a erat faucibus fringilla. Nulla eget magna quis neque
                                hendrerit aliquet condimentum quis nibh. Maecenas pulvinar neque rhoncus enim sodales
                                sit amet elementum purus varius. Vivamus ornare nibh ut massa condimentum at feugiat
                                nisi egestas. Pellentesque eget adipiscing tellus. Morbi malesuada placerat elit,
                                vel ornare nunc bibendum non. Maecenas quam massa, aliquam vitae congue in, mollis
                                eget ligula. In hac habitasse platea dictumst. Aenean pharetra congue massa, ac
                                faucibus mauris congue malesuada. Suspendisse pharetra sollicitudin tellus nec auctor.</p>
                            <div class="well" style="padding: 14px 19px;">
                                <input id="upvote" class="btn success" type="button" value="Like!">
                                <input id="downvote" class="btn danger" type="button" value="Don´t like!">
                            </div>
                        </div>
                    </div>
                }
                <div class="row">
                    <div class="span11">
                        <legend><h3>
                            Add a new resource</h3></legend>
                        <form>
                        <fieldset>
                            <div class="clearfix">
                                <label for="xlInput">
                                    Title</label>
                                <div class="input">
                                    <input class="xlarge" id="xlInput" name="xlInput" size="30" type="text">
                                </div>
                            </div>
                            <div class="clearfix">
                                <label for="textarea">
                                    Description</label>
                                <div class="input">
                                    <textarea class="xlarge" id="textarea2" name="textarea2" rows="3"></textarea>
                                    <span class="help-block">Block of help text to describe the field above if need be.
                                    </span>
                                </div>
                            </div>
                            <div class="clearfix">
                                <label for="xlInput">
                                    Url</label>
                                <div class="input">
                                    <input class="xlarge" id="xlInput" name="xlInput" size="30" type="text">
                                </div>
                            </div>
                            <div class="actions">
                                <input type="submit" class="btn primary" value="Save changes">&nbsp;
                                <button type="reset" class="btn">
                                    Cancel</button>
                            </div>
                        </fieldset>
                        </form>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="popular">
                <iframe src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/trends_gadget.xml&amp;source=imag&amp;up_is_init=true&amp;up_cur_term=@Url.Encode(Model.Title)"
                style="border: 1px solid #ccc; padding: 10px;" width="620" height="250" frameborder="0"
                scrolling="no"></iframe>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="span11">
        <h2>
            Comments
        </h2>
        <div id="disqus_thread">
        </div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'bizzbingo'; // required: replace example with your forum shortname
            var disqus_developer = 1; // developer mode is on
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>
            Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments
                powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">
            Disqus</span></a>
    </div>
</div>
@section Scripts
{
    <script type="text/javascript">
        $(function () {
            $("#upvote").click(function () {
                $.ajax({
                    url: '@Url.Action("Upvote")?id=@Model.Id',
                    type: 'PUT',
                    success: function (result) {
                        refreshStats(result);
                    }
                });
            });

            $("#downvote").click(function () {
                $.ajax({
                    url: '@Url.Action("Downvote")?id=@Model.Id',
                    type: 'PUT',
                    success: function (result) {
                        refreshStats(result);
                    }
                });
            });

            $('.tabs').tabs();
        });

        function refreshStats(result) {
            $("#stateViews").html(result.Views);
            $("#stateDownvotes").html(result.DownVotes);
            $("#stateUpvotes").html(result.UpVotes);
        }
    </script>
}
